
sudo apt-get install  libccid scdaemon gpg python3-usb

gpg --card-status | grep Version
gpg --card-edit

Admin PIN orig: 12345678
Admin PIN neu : 87654321   #PIN changed.

#GEHT NUR MIT ZERT!
PIN orig: 123456
PIN neu : 654321
RESET: 88888888

GENERATE (setzt pin auf default)

gpg --card-edit --expert



PoC
===

echo "tim@web.de" | gpg --encrypt --armor --recipient adams.r+test@zdf.de > file.enc
CRYPTTXT=$(echo "tim@web.de" | gpg --encrypt --armor --recipient adams.r+test@zdf.de)
gpg --decrypt < file.enc
echo "$CRYPTTXT" | gpg --decrypt --passphrase 654321

DB:
ID  HASH    EMAIL_CRYPTED
0   X345    kljsdfOPK30i4

hash(tim@web.de) => X345
mail_crypted = db_get(HASH=X345)

gpg decrypt kljsdfOPK30i4




dev
===
#apt install gnupg2 gnupg-agent gnupg-pkcs11-scd gnupg-pkcs11-scd-proxy
#wget https://github.com/gpg/gpgme/archive/gpgme-1.13.1.tar.gz

sudo apt install libgpg-error-dev libassuan-dev texinfo
wget https://github.com/gpg/gpgme/archive/gpgme-1.7.1.tar.gz
tar xvf gpgme-1.7.1.tar.gz
cd gpgme-gpgme-1.7.1
./autogen.sh
./configure
make
sudo make install

#remove: sudo make uninstall


location:
/usr/local/bin/gpgme-tool
/usr/local/bin/gpgme-config
/usr/local/bin/gpgme-json

libgpgme11 libqgpgme7 libqgpgme1

https://www.gnupg.org/documentation/manuals/gpgme/
https://github.com/mailvelope/gpgmejs
{
	"name": "gpgmejson",
	"description": "This is a test application for gpgme.js",
	"path": "/usr/local/bin/gpgme-json",
	"type": "stdio",
	"allowed_origins": ["chrome-extension://kajibbejlbohfaggdiogboambcijhkke/"]
}

python
https://git.gnupg.org/cgi-bin/gitweb.cgi?p=gpgme.git;a=tree;f=lang/python/examples;hb=refs/heads/master
https://git.gnupg.org/cgi-bin/gitweb.cgi?p=gpgme.git;a=tree;f=lang/python/examples/howto;h=7f77be8d273962cfd2a2cf4d077d00e730d2db7f;hb=refs/heads/master
Note that the package python-gpgme is no longer in Ubuntu 18.04 repository. The successor is python3-gpg
apt install python3-gpg

